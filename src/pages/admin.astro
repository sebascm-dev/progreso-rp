---
import UserNotAccess from "@components/authComponents/UserNotAccess.astro";
import Layout from "../layouts/Layout.astro";
import { SignIn, SignOut } from "auth-astro/components";
import { getSession } from "auth-astro/server";
const session = await getSession(Astro.request);
---

<Layout
  title="ProgresoRP - Zona de Administradores"
  description="¡Bienvenido a la Zona de Administradores de ProgresoRP!"
>
  <section class="flex flex-col justify-center items-center">
    {
      session ? (
        session.user?.email === "spanolocabo@gmail.com" ? (
          <>
            <p>Hola {session.user?.email}</p>
            <SignOut>Cerrar Sesión</SignOut>
          </>
        ) : (
          <>
            <UserNotAccess />
          </>
        )
      ) : (
        
          <SignIn provider="google" class="px-4 py-2 bg-[#B1DAF8]/10 bg-blur backdrop-blur backdrop-filter border flex gap-2 border-slate-700 rounded-lg text-white hover:border-slate-500 hover:text-slate-200 hover:shadow transition duration-300">
            <img
              class="w-6 h-6"
              src="https://www.svgrepo.com/show/475656/google-color.svg"
              loading="lazy"
              alt="google logo"
            />
            <span>Login with Google</span>
        </SignIn>
      )
    }
  </section>
</Layout>
